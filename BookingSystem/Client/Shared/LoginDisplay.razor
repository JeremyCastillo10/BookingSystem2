@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@inject NavigationManager Navigation

<AuthorizeView>
    <Authorized>
        <MudBadge Color="MudBlazor.Color.Success" Overlap="true" Bordered="true">
            <MudAvatar Image="imagenes/mony.jpg" @onclick="ShowOptions" />
        </MudBadge>

        @if (showOptions)
        {
            <div class="collapse navbar-collapse show" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="dropdown">
                        <div class="dropdown-menu show" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="authentication/profile">Perfil</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="HistorialCitas">Historial</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" @onclick="BeginLogOut">Log out</a>
                        </div>
                    </li>
                </ul>
            </div>

        }

    </Authorized>
    <NotAuthorized>
        <a href="authentication/register">Register</a>
        <a href="authentication/login">Log in</a>
    </NotAuthorized>
</AuthorizeView>

@code {
    bool showOptions = false;

    void ShowOptions()
    {
        showOptions = !showOptions;
    }
    private void BeginLogOut()
    {
        Navigation.NavigateToLogout("authentication/logout");
    }
}
